import { Telegraf } from 'telegraf';
// import * as dotenv from 'dotenv';
import { Telegram } from 'telegraf/src/telegram';
// dotenv.config();

export const bot = new Telegraf(process.env.BOT_TOKEN);
const tg = new Telegram(process.env.BOT_TOKEN);

let text =
  '<b>–ö–∞–∫ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Å–ª–æ–≤–∞ –¥–ª—è —Å—Ç–∏–∫–µ—Ä–∞</b>\n\n' +
  '–°–æ–∑–¥–∞—Ç—å –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –±–æ—Ç–∞ @like —Ç–∞–∫:\n' +
  '1. –ó–∞–π—Ç–∏ –≤ —á–∞—Ç —Å –±–æ—Ç–æ–º @like\n' +
  '2. –ù–∞–ø–∏—Å–∞—Ç—å –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º–æ–µ —Å–ª–æ–≤–æ/—Ñ—Ä–∞–∑—É, –¥–æ–±–∞–≤–∏—Ç—å —Ö—ç—à—Ç–µ–≥ #–≥–æ–ª–æ—Å—É–π (–¥–ª—è –æ–±–ª–µ–≥—á–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–µ–π –∏ –∂–µ–ª–∞—é—â–∏–º–∏ –≥–æ–ª–æ—Å–æ–≤–∞—Ç—å)\n' +
  '3. –î–æ–±–∞–≤–∏—Ç—å –¥–≤–∞ —Å–º–∞–π–ª–∞: üëçüèº –∏ üëéüèº\n' +
  '4. –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–π –æ–ø—Ä–æ—Å –≤ —á–∞—Ç–µ: @wordsru\n' +
  '5. –ñ–¥–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è (–º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å–∏—Ç—å –¥—Ä—É–∑–µ–π)\n' +
  '\n' +
  '<b>–ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è: t.me/wordsru/9760</b>\n' +
  '\n' +
  '<b>–°—Ä–∞–∑—É –æ—Ç–∫–∞–∑—ã–≤–∞–µ–º –≤ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏:</b>\n' +
  '<b>- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–º—è</b> (–ü–µ—Ç—è - –ª–æ—Ö)   <em>–ó–∞—á–µ–º —Ç—ã—Å—è—á–∞–º –ª—é–¥–µ–π —Å—Ç–∏–∫–µ—Ä —Å –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏–µ–º –≤–∞—à–µ–≥–æ –¥—Ä—É–≥–∞?</em>\n' +
  '- –£–∂–µ –∏–º–µ–µ—Ç—Å—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π —Å—Ç–∏–∫–µ—Ä, –Ω–µ—Å—É—â–∏–π —Ç–æ—Ç –∂–µ —Å–º—ã—Å–ª';

bot.command('add', async (ctx: any) => {
  if (JSON.parse('[' + process.env.ADMIN_IDS + ']').includes(ctx.from.id)) {
    try {
      await tg.deleteMessage(ctx.chat.id, ctx.message.message_id);
    } catch (e) {
      console.log(e);
    }
    ctx.telegram.sendMessage(ctx.chat.id, text, { parse_mode: 'html' });
  } else {
    console.log('403, tried by' + ctx.chat);
  }
});

bot.launch();

bot.catch(() => {
  bot.launch();
});
